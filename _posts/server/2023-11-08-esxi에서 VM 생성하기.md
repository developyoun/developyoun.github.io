---
title: esxi에서 VM 생성하기
categories:
  - server
tags:
  - server
  - esxi
  - vm
toc: true
toc_sticky: true
toc_label: Contents
---

esxi를 이용해서 개인 서버 하나 구축해보려는데 꽤나 고생했었어서 나름대로 정리해보기 위해 글을 작성하기로 했다.

참고로 esxi 버전은 8.0으로 구축했고, 맥에서는 esxi의 iso 파일이 인식을 못하므로 꼭 윈도우에서 os 설치파일을 만드는게 정신건강에 좋다.
> 맥에서 명령어를 통한 설치파일 방법이나, etcher를 이용하는 방법이나 이것저것 다 해봤는데 다 안되었고 윈도우 환경에서 rofus를 이용한 방법으로 다이렉트로 해결됨

## 사전 설정
이미 esxi를 구축해놓았다면 딱히 사전 설정이라고 할 건 없는데,  
구축한 호스트에 접속해서 **가상 시스템 → VM 생성/등록** 을 누를 준비만 하면 된다.
![](https://i.imgur.com/C69KAxL.png)
참고로 이것저것 테스트 해볼 rocky 환경의 리눅스를 구축해놓은 상황이다. 하지만 하나 더 VM 생성하는 과정을 기록 해볼 예정.

## VM 생성해보기
VM 생성/등록 버튼을 클릭해서부터 시작해서 하나씩 설정해보자
### 1. 생성 유형 선택
![](https://i.imgur.com/Y0tUmZn.png)
당연히 새 가상 시스템을 생성할 것이기 때문에, "새 가상 시스템 생성"을 선택하고 다음으로
### 2. 이름 및 게스트 운영 체제 선택
![](https://i.imgur.com/i6YNONs.png)
**이름**은 그냥 내가 생성할 VM을 구별할 네이밍이라 생각하면 되고, 호환성은 디폴트로 설정된 **ESXi 가상 시스템** 으로 선택했다.  
이후, 설치를 원하는 **OS 운영체제** 및 **버전**을 선택하여 다음으로.

### 3. 스토리지 선택
![](https://i.imgur.com/mZLpA0x.png)
그리고 스토리지 선택하는데 나 같은 경우 총 공간은 337GB 정도이고, 사전에 생성한 VM (초기에 보았단 rocky linux)이 40GB 정도로 먹고 있어서 사용가능한 공간이 그 차이만큼 나와있다.

만약 디스크가 나처럼 단일이 아니고 다중 디스크라면 저 리스트가 더 나올 것이다.

### 4. 설정 사용자 설정
진짜.. 여기에서 시간을 많이 먹었다. (무한 VM 생성, 삭제의 원인 과정,,,)
![](https://i.imgur.com/hmBVf0V.png)
#### 4.1 가상 하드웨어 탭
- CPU, 메모리, 디스크 모두 생성하고자 하는 VM의 사양을 입력
- SCSI 컨트롤러는 default로 설정된 "VMware Paravirtual" 선택
- USB 컨트롤러는 사용 영향도가 적으므로 기본값 (2.0) 선택
- 네트워크 어댑터도 기본값으로 사용 (VM Network)
- CD/DVD 드라이브
	- 호스트 디바이스: ESXi에서 제공하는 iso을 사용한다. 하지만 해당 값으로 생성하면 `Operating System not found` 문구가 반복되면서 OS 설치가 안되는 상황이 발생한다.
	- 데이터스토어 iso 파일: 로컬pc에서 설치한 iso 파일을 사용하여 OS 설치를 진행한다. 공식 iso를 업로드해서 사용하면 이슈 없이 사용할 수 있다.
- 비디오 카드는 기본 설정으로 사용

#### 4.2 VM 옵션 탭
![](https://i.imgur.com/jZ4Jrpw.png)
VM 옵션은 다양하게 있지만 전부 기본값으로 설정해도 이슈는 없다.  
다만, 나는 펌웨어는 BIOS 대신 EFI로 사용했다.
> BIOS는 현재 레거시로 표현되고 있으며 x86 16비트의 플랫폼 의존적이다. 기왕이면 최신이 좋지 않겠는가

마지막으로 내가 설정을 확인하면서 동시에 완료하면 된다.

---

이제 마음껏 서버를 이용해 해볼 수 있다.