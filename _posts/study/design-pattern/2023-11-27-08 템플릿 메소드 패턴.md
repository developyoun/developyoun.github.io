---
title: 08. 템플릿 메소드 패턴
categories:
- 디자인패턴
tags:
- design-pattern
- study
toc: true
toc_sticky: true
toc_label: Contents
---

## 템플릿 메소드 패턴?
**템플릿 메소드 패턴은 알고리즘의 골격을 정의한다.** 템플릿 메소드를 사용하면 알고리즘의 일부 단계를 서브클래스에서 구현할 수 있으며, 알고리즘의 구조는 그대로 유지하면서 알고리즘의 특정 단계를 서브클래스에서 재정의할 수도 있다.
> 템플릿 메소드 패턴은, 알고리즘의 각 단계를 정의하며, 서브클래스에서 일부 단계를 구현할 수 있도록 유도한다.

- 템플릿이란 일련의 단계로 알고리즘을 정의한 메소드이다.
- 여러 단계 가운데 하나 이상의 단계가 추상 메소드로 정의되고, 그 추상 메소드는 서브 클래스에서 구현된다.
- 서브클래스가 일부분의 구현을 처리하게 하면서도 알고리즘의 구조는 바꾸지 않아도 된다.

## 템플릿 메소드 패턴의 예제
### 1.  슈퍼 클래스
```java
public abstract class CaffeineBeverage {

	final void prepareRecipe() {
		boilWater();
		brew();
		pourInCup();
		addCondiments();
	}

	abstract void brew();

	abstract void addCondiments();

	void boilWater() {
		// 생략...
	}

	void pourInCup() {
		// 생략...
	}
}
```
- `prepareRecipe` 메서드는 템플릿 메소드 (알고리즘을 정의한 메서드)
- `brew` 및 `addCondiments` 메서드는 서브클래스에서 정의
- `boilWater` 및 `pourInCup` 메서드는 서브클래스에서 공통적으로 사용하는 메서드

### 2. 서브 클래스
```java
public class Tea extends CaffeineBeverage() {
	public void brew() {
		// ...생략
	}

	public void brew() {
		// ... 생략
	}
}
```


## 후크(Hook) 메서드
후크는 추상 클래스에서 선언되지만 기본적인 내용만 구현되어 있거나 아무 코드도 들어있지 않은 메소드이다.  
후크를 이용해 다양한 위치에 알고리즘에 끼어들어 알고리즘을 제어할 수 있다.
```java
public abstract class CaffeinBeberageWithHook {

	final void prepareRecipe() {
		boilWater();
		brew();
		pourInCup();
		if (customerWantsCondiments()) {
			addCondiments();
		}
	}

	// ... 생략

	// 후크(hook) 메서드
	boolean customerWantsCondiments() {
		return true;
	}
}
```

## 할리우드 원칙 (Hollywood Principle)
> 먼저 연락하지 마세요. 저희가 연락드리겠습니다.

내가 언제 어떻게 해야 할 지를 알고, 스스로 제어 할 수 있는 일이면 하되, 그밖에 영역의 일은 정의해서 알려주면 행동하겠다를 의미하는 원칙

할리우드 원칙을 적용하면, 저수준 구성요소에서 고수준 구성요소를 집적 호출 할 수 없게 하고, 고수준 구성요소가 저수준 구성요소를 직접 호출 하는것은 허용하게 한다.

> 고수준의 구성 요소가 저수준 구성 요소에 의존하고, 저수준 구성 요소는 다시 고수준 구성 요소를 의존하면서 의존성이 복잡하게 엮이게 되는 상황을 의존성이 부패했다고 부른다.

![](https://i.imgur.com/wWxjNfW.png)
- `CaffeineBeverage` 클래스는 고수준 구성 요소이다.
	- 메소드 구현이 필요한 상황에서만 서브클래스를 불러낸다.
- 슈퍼클래스의 클라이언트는 `Tea` 혹은 `CaffeineBeverage` 같은 구상 클래스가 아닌 슈퍼클래스에 추상화되어있는 부분에 의존한다.
	- 이는 전체 시스템의 의존성을 낮춘다
- `Tea` 와 `Coffee`는 호출 당하기 전까지 추상클래스를 직접 호출하지 않는다.
